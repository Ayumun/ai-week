# メイン画面背景色変更 要件定義書

## 概要
投稿があるメイン画面（フィード画面）の背景色を現在の`#fafafa`から`#D3D3D3`（ライトグレー）に変更し、より視認性の高いUIを提供します。

## AS-IS（現状）

### 現在の実装状況
- メイン画面（フィード画面）は`body`要素のグローバル背景色`#fafafa`を継承しています
- `style.css`の4-9行目で`body`要素に背景色が定義されています
- 現在の背景色: `#fafafa`（非常に薄いグレー）
- メイン画面は`.content-area`クラスを持つ要素でレンダリングされます
- `.feed-container`クラスが投稿フィード領域を定義しています

### 現状の課題
- 背景色が白に近すぎて、投稿カード（白背景`#fff`）との境界が不明瞭
- ユーザーによっては背景と投稿の区別がつきにくい
- デザインの階層感が弱い

## TO-BE（目標状態）

### 実現したい姿
- メイン画面の背景色を`#D3D3D3`に変更
- 投稿カードと背景の明確なコントラストを実現
- より洗練されたビジュアルデザイン
- 既存の認証画面やExplore画面などの背景色には影響を与えない

### 期待される改善
- 投稿カードと背景の視認性が向上
- UIの階層構造が明確化
- ユーザー体験の向上（コンテンツへの集中力アップ）
- デザインの一貫性維持

## ビジネス価値
- **問題**: 現在の背景色では投稿カードとの区別が不明瞭で、視覚的な階層感が不足している
- **解決策**: メイン画面の背景色を`#D3D3D3`に変更し、投稿カードを際立たせる
- **期待効果**: ユーザーの投稿閲覧体験が向上し、アプリの使いやすさが改善される

## スコープ
### 含まれるもの
- メイン画面（フィード画面）の背景色を`#D3D3D3`に変更
- デスクトップおよびモバイル表示での背景色適用
- 既存のレスポンシブデザインの維持

### 含まれないもの
- 他の画面（認証画面、Explore、プロフィール画面など）の背景色変更
- 投稿カードのデザイン変更
- ストーリーバーのデザイン変更
- ナビゲーションバーの背景色変更

## ユーザーストーリー

### Story 1: メイン画面の背景色変更
**As a** ユーザー
**I want to** メイン画面で投稿を見る際に明確な背景色を体験したい
**So that** 投稿カードと背景を容易に区別でき、コンテンツに集中できる

#### 受け入れ基準
- [ ] **AC1.1**:
  - Given: ユーザーがログインしている
  - When: メイン画面（フィード画面）にアクセスする
  - Then: 背景色が`#D3D3D3`で表示される

- [ ] **AC1.2**:
  - Given: メイン画面が`#D3D3D3`の背景色で表示されている
  - When: 投稿カード（白背景`#fff`）を閲覧する
  - Then: 投稿カードと背景の間に明確な視覚的コントラストが確認できる

- [ ] **AC1.3**:
  - Given: メイン画面を表示している
  - When: ストーリーバーと投稿フィード全体を見る
  - Then: すべての要素が新しい背景色`#D3D3D3`の上に正しく表示される

- [ ] **AC1.4**:
  - Given: デスクトップブラウザでメイン画面を表示している
  - When: 画面をスクロールする
  - Then: 背景色`#D3D3D3`がスクロール範囲全体で一貫して表示される

- [ ] **AC1.5**:
  - Given: モバイルブラウザ（768px以下）でメイン画面を表示している
  - When: 画面をスクロールする
  - Then: 背景色`#D3D3D3`が正しく表示され、ボトムナビゲーションとの境界が明確である

#### 実装の優先順位
P0 (必須)

---

### Story 2: 他画面の背景色が影響を受けないことの確認
**As a** 開発者
**I want to** メイン画面以外の背景色が変更されないことを確認したい
**So that** 既存のデザインを保持し、意図しない副作用を防ぐ

#### 受け入れ基準
- [ ] **AC2.1**:
  - Given: ユーザーが認証画面（ログイン/サインアップ）を表示している
  - When: 背景色を確認する
  - Then: 背景色が従来の`#fafafa`のまま維持される

- [ ] **AC2.2**:
  - Given: ユーザーがExplore画面を表示している
  - When: 背景色を確認する
  - Then: 背景色が従来の`#fafafa`のまま維持される

- [ ] **AC2.3**:
  - Given: ユーザーがプロフィール画面を表示している
  - When: 背景色を確認する
  - Then: 背景色が従来の`#fafafa`のまま維持される

- [ ] **AC2.4**:
  - Given: ユーザーがいいねした投稿一覧画面を表示している
  - When: 背景色を確認する
  - Then: 背景色が従来の`#fafafa`のまま維持される

#### 実装の優先順位
P0 (必須)

---

### Story 3: レスポンシブデザインの維持
**As a** モバイルユーザー
**I want to** モバイルデバイスでもメイン画面の新しい背景色を体験したい
**So that** デスクトップと同じ視覚的な体験が得られる

#### 受け入れ基準
- [ ] **AC3.1**:
  - Given: タブレット（768px～1024px）でメイン画面を表示している
  - When: 背景色を確認する
  - Then: 背景色が`#D3D3D3`で表示される

- [ ] **AC3.2**:
  - Given: スマートフォン（375px～768px）でメイン画面を表示している
  - When: 背景色を確認する
  - Then: 背景色が`#D3D3D3`で表示される

- [ ] **AC3.3**:
  - Given: 小型スマートフォン（375px以下）でメイン画面を表示している
  - When: 背景色を確認する
  - Then: 背景色が`#D3D3D3`で表示され、レイアウトが崩れない

#### 実装の優先順位
P0 (必須)

## 詳細なビジネス要件

### UI/UX要件
#### 背景色の適用範囲
**要件内容**:
- メイン画面（フィード画面）のみに`#D3D3D3`を適用
- `.content-area`要素配下のフィード領域が対象
- 投稿カード、ストーリーバー、その他のUIコンポーネントには影響を与えない
- トップナビゲーションとボトムナビゲーションの背景色は白（`#fff`）を維持

**OK例**:
- `.feed-container`の親要素に背景色を適用
- メディアクエリを使用してレスポンシブ対応
- 既存のCSSスタイルを上書きせずに追加

**NG例**:
- `body`要素の背景色を直接変更（全画面に影響）
- 投稿カードの背景色を変更
- ナビゲーションバーの背景色を変更

---

### カラーパレット要件
#### 背景色の仕様
**要件内容**:
- 新しい背景色: `#D3D3D3` (RGB: 211, 211, 211)
- 投稿カード背景色: `#fff`（変更なし）
- ナビゲーションバー背景色: `#fff`（変更なし）
- コントラスト比: 投稿カードと背景の明度差が十分確保されること

**OK例**:
- `background: #D3D3D3;`
- `background-color: #D3D3D3;`
- RGB値で指定: `background: rgb(211, 211, 211);`

**NG例**:
- `#d3d3d3`（小文字は避ける、統一性のため大文字推奨）
- `lightgray`（キーワードではなくHEX値を使用）
- 不透明度を使用した指定: `rgba(211, 211, 211, 0.9)`（完全な不透明度`1.0`を使用）

---

### CSS実装要件
#### スタイルの適用方法
**要件内容**:
- `style.css`ファイルにスタイルを追加
- 既存のCSSルールを変更せず、新しいルールを追加
- フィード画面専用のクラスまたは親要素にスタイルを適用
- 他の画面に影響を与えないようにスコープを限定

**OK例**:
```css
/* Feed specific background */
.main-layout.feed .content-area {
  background: #D3D3D3;
}
```
または
```css
.feed-container {
  background: #D3D3D3;
  min-height: 100vh;
}
```

**NG例**:
```css
/* これは全画面に影響する */
body {
  background: #D3D3D3;
}

/* これはコンテンツエリア全体に影響する */
.content-area {
  background: #D3D3D3;
}
```

## 非機能要件

### パフォーマンス
- CSSの変更のみで実装し、JavaScriptの変更は不要
- ページロード時間に影響を与えない（CSSファイルサイズの増加は1KB未満）
- レンダリングパフォーマンスに影響なし

### ブラウザ互換性
- モダンブラウザ（Chrome, Firefox, Safari, Edge）の最新2バージョンでサポート
- モバイルブラウザ（iOS Safari, Chrome for Android）でサポート
- CSS3の基本的な背景色指定を使用（互換性問題なし）

### アクセシビリティ
- 背景色と投稿カードのコントラスト比がWCAG 2.1 AA基準を満たすこと
- テキストの可読性が維持されること
- 色覚異常のユーザーでも投稿カードと背景の区別が可能であること

### 保守性
- CSSコードはセマンティックで理解しやすいこと
- コメントで変更の意図を明記
- 将来的な背景色変更が容易であること

## 技術的制約
- 既存のHTML構造（`index.html`）は変更しない
- 既存のJavaScript（`app.js`）は変更しない
- CSS（`style.css`）のみを変更
- 既存のCSSクラス名を変更しない
- 既存のレイアウトシステムを維持

## 依存関係
- 他の機能との依存関係なし（独立した変更）
- 他のIssueやPRとの衝突なし
- GitHub Issue #2の完了がこのタスクの完了条件

## リスクと対策
| リスク | 影響度 | 発生確率 | 対策 |
|--------|--------|----------|------|
| 他の画面の背景色が意図せず変更される | 高 | 中 | CSSセレクタを慎重に設計し、フィード画面のみに適用されることを確認する |
| 投稿カードの視認性が低下する | 中 | 低 | コントラスト比をテストし、必要に応じて背景色を微調整 |
| モバイル表示で背景色が正しく表示されない | 中 | 低 | レスポンシブデザインをテストし、メディアクエリを適切に設定 |
| ブラウザ互換性の問題 | 低 | 低 | 複数のブラウザでテストを実施 |

## 成功指標
- メイン画面の背景色が`#D3D3D3`で表示されることを目視で確認
- 他の画面（認証、Explore、プロフィール、いいね一覧）の背景色が変更されていないことを確認
- デスクトップとモバイルの両方で背景色が正しく表示されることを確認
- 投稿カードと背景のコントラスト比がWCAG AA基準（最低4.5:1）を満たすこと
- ユーザーフィードバックで視認性の向上が報告されること

## タイムライン
- **Phase 1（即時実装可能）**:
  - Story 1: メイン画面の背景色変更（CSS修正）
  - Story 2: 他画面の背景色確認（QAテスト）
  - Story 3: レスポンシブデザインの維持（QAテスト）

## 実装ガイドライン

### 推奨アプローチ1: フィード画面専用クラスの追加
1. `app.js`の`renderMain()`関数を確認（280-296行目）
2. フィード画面の場合に`.main-layout`に追加クラス（例: `.feed-page`）を付与
3. `style.css`に以下を追加:
```css
.main-layout.feed-page .content-area {
  background: #D3D3D3;
}
```

### 推奨アプローチ2: フィードコンテナに背景色を適用
1. `style.css`の`.feed-container`セクション（111-113行目）を編集
2. 背景色とビューポート全体をカバーするスタイルを追加:
```css
.feed-container {
  max-width: 470px;
  margin: 0 auto;
  padding: 20px 0;
  background: #D3D3D3;
  min-height: calc(100vh - 110px); /* ヘッダーとフッターを除いた高さ */
}
```

### 推奨アプローチ3: コンテンツエリアに条件付き背景色
1. HTMLまたはJavaScriptでフィード画面専用の属性を追加
2. `style.css`に以下を追加:
```css
.content-area[data-page="feed"] {
  background: #D3D3D3;
}
```

**注意**: 推奨アプローチ2はHTMLとJavaScriptの変更を最小限に抑え、CSSのみで実装できるため、最も簡潔です。

## テストケース

### 手動テスト
1. デスクトップブラウザでアプリを開く
2. ログインしてメイン画面（フィード）にアクセス
3. 背景色が`#D3D3D3`であることを確認（ブラウザのDevToolsで確認）
4. 投稿カードが白背景で明確に区別できることを確認
5. Explore、プロフィール、認証画面に遷移し、背景色が`#fafafa`のままであることを確認
6. モバイル表示（DevToolsでデバイスエミュレーション）で手順2-5を繰り返す

### ビジュアルリグレッションテスト
- メイン画面のスクリーンショットを撮影し、背景色を確認
- 他の画面のスクリーンショットを撮影し、変更がないことを確認

### アクセシビリティテスト
- コントラスト比チェッカーで投稿カード（`#fff`）と背景（`#D3D3D3`）のコントラストを測定
- 期待値: 最低4.5:1のコントラスト比
